1. 创建热词统计表 原来的表为: APPSTORE_STATISTIC_HOTSEARCH(热搜词上榜总时长TOP20)
CREATE TABLE APPSTORE.HOTSEARCH_STATISTIC(
DAY VARCHAR NOT NULL,
COUNTRY VARCHAR NOT NULL,
DEVICE VARCHAR NOT NULL,
HOTWORD VARCHAR NOT NULL,
STARTTIME VARCHAR NOT NULL,
ENDTIME VARCHAR,
DURATION INTEGER,
RANKING INTEGER,
CONSTRAINT pk PRIMARY KEY (DAY,COUNTRY,DEVICE,HOTWORD,STARTTIME)) SALT_BUCKETS = 20;

2. 创建实时热搜词表, 热搜词上榜总时长TOP 20下面的那个表格 原来的表为: APPSTORE_HOTSEARCH_AGRR
CREATE TABLE APPSTORE.HOTSEARCH_AGRR(
UPDATETIME VARCHAR NOT NULL,
COUNTRY VARCHAR NOT NULL,
DEVICE VARCHAR NOT NULL,
HOTWORDS VARCHAR  NOT NULL,
DAY VARCHAR,
CONSTRAINT pk PRIMARY KEY (UPDATETIME, COUNTRY, DEVICE, HOTWORDS)) SALT_BUCKETS = 20;

3 由于每天最后要统一跑一次
CREATE TABLE APPSTORE.TOP10_APP_RESULTS(
DAY VARCHAR NOT NULL,
COUNTRY VARCHAR NOT NULL,
DEVICE VARCHAR NOT NULL,
HOTWORD VARCHAR NOT NULL,
RANKING INTEGER NOT NULL,
GENRENAMES VARCHAR,
APPNAME VARCHAR,
APPID VARCHAR,
APPIMG VARCHAR,
COMPANYNAME VARCHAR,
UPDATETIME VARCHAR,
CONSTRAINT pk PRIMARY KEY (DAY, COUNTRY, DEVICE,HOTWORD, RANKING )) SALT_BUCKETS = 20;
-------------------------------------------------------------------------------------------
4,app排行每半小时跑(实时排名)
CREATE TABLE APPSTORE.APP_TOP100(
DAY VARCHAR NOT NULL,
COUNTRY VARCHAR NOT NULL,
DEVICE VARCHAR NOT NULL,
LISTCATEGORY VARCHAR NOT NULL,
APPCATEGORY VARCHAR NOT NULL,
RANKING INTEGER NOT NULL,
APPID VARCHAR,
APPNAME VARCHAR,
APPIMG VARCHAR,
COMPANYNAME VARCHAR,
UPDATETIME VARCHAR,
CONSTRAINT pk PRIMARY KEY ( DAY, COUNTRY, DEVICE, LISTCATEGORY, APPCATEGORY,RANKING)) SALT_BUCKETS = 20;
-----------------------------------------------------------------------------------
5,
--------
CREATE TABLE APPSTORE.APP_CURRENT_TOP100(
COUNTRY VARCHAR NOT NULL,
DEVICE VARCHAR NOT NULL,
LISTCATEGORY VARCHAR NOT NULL,
APPCATEGORY VARCHAR NOT NULL,
RANKING INTEGER NOT NULL,
APPID VARCHAR,
APPNAME VARCHAR,
APPIMG VARCHAR,
COMPANYNAME VARCHAR,
UPDATETIME VARCHAR,
CONSTRAINT pk PRIMARY KEY (COUNTRY, DEVICE, LISTCATEGORY, APPCATEGORY,RANKING)) SALT_BUCKETS = 20;
------------------------------------------------------------------------------------------------------
6. 创建APPSTORE.CURRENT_SEARCHINDEX 原来的表为：APPSTORE_CURRENT_SEARCHINDEX
CREATE TABLE APPSTORE.CURRENT_SEARCHINDEX(
COUNTRY VARCHAR NOT NULL,
DEVICE VARCHAR NOT NULL,
HOTWORD VARCHAR NOT NULL,
APPID VARCHAR,
GENRENAMES VARCHAR,
SEARCHINDEX INTEGER,
HOTWORD_RESULTCOUNT INTEGER,
RELATEDWORDS VARCHAR ,
APPNAME VARCHAR,
APPIMG VARCHAR,
COMPANYNAME VARCHAR,
APPRANKINGCATEGORY VARCHAR ,
UPDATETIME VARCHAR,
CONSTRAINT pk PRIMARY KEY (COUNTRY, DEVICE,HOTWORD)) SALT_BUCKETS = 20;
//允许APP_RANKING为空
ALTER TABLE APPSTORE.CURRENT_SEARCHINDEX ADD APP_RANKING VARCHAR null primary key;

7.
关键词覆盖
CREATE TABLE APPSTORE.APP_KEYWORD_COVER(
DAY VARCHAR NOT NULL,
COUNTRY VARCHAR NOT NULL,
DEVICE VARCHAR NOT NULL,
APPID VARCHAR NOT NULL,
ALL_RANGE_GTE_8000 INTEGER,
ALL_RANGE_7000_7999 INTEGER,
ALL_RANGE_6000_6999 INTEGER,
ALL_RANGE_5000_5999 INTEGER,
ALL_RANGE_4605_4999 INTEGER,
ALL_RANGE_LT_4605 INTEGER,
TOP3_RANGE_GTE_8000 INTEGER,
TOP3_RANGE_7000_7999 INTEGER,
TOP3_RANGE_6000_6999 INTEGER,
TOP3_RANGE_5000_5999 INTEGER,
TOP3_RANGE_4605_4999 INTEGER,
TOP3_RANGE_LT_4605 INTEGER,
TOP10_RANGE_GTE_8000 INTEGER,
TOP10_RANGE_7000_7999 INTEGER,
TOP10_RANGE_6000_6999 INTEGER,
TOP10_RANGE_5000_5999 INTEGER,
TOP10_RANGE_4605_4999 INTEGER,
TOP10_RANGE_LT_4605 INTEGER,
TOP10_TOTAL INTEGER,
CONSTRAINT pk PRIMARY KEY (DAY, COUNTRY, DEVICE,APPID)) SALT_BUCKETS = 20;

8.关键词搜索排名
CREATE TABLE APPSTORE.APP_KEYWORD_RANKING(
DAY VARCHAR NOT NULL,
COUNTRY VARCHAR NOT NULL,
DEVICE VARCHAR NOT NULL,
APPID VARCHAR NOT NULL,
HOTWORD VARCHAR NOT NULL,
APP_RANKING INTEGER,
SEARCHINDEX INTEGER,
HOTWORD_RESULTCOUNT INTEGER,
UPDATETIME VARCHAR,
CONSTRAINT pk PRIMARY KEY (DAY,COUNTRY,DEVICE,APPID,HOTWORD)) SALT_BUCKETS = 20;

9.关键词热搜上榜记录
CREATE TABLE APPSTORE.APP_KEYWORD_ON_BOARD_COVER(
DAY VARCHAR NOT NULL,
COUNTRY VARCHAR NOT NULL,
DEVICE VARCHAR NOT NULL,
APPID VARCHAR NOT NULL,
TOP10_TOTAL INTEGER,
CONSTRAINT pk PRIMARY KEY (DAY, COUNTRY, DEVICE,APPID)) SALT_BUCKETS = 20;

10.
CREATE TABLE APPSTORE.APP_KEYWORD_ON_BOARD_RANKING(
DAY VARCHAR NOT NULL,
COUNTRY VARCHAR NOT NULL,
DEVICE VARCHAR NOT NULL,
APPID VARCHAR NOT NULL,
HOTWORD VARCHAR NOT NULL,
HOTWORD_RANKING INTEGER,
UPDATETIME VARCHAR,
CONSTRAINT pk PRIMARY KEY (DAY,COUNTRY,DEVICE,APPID,HOTWORD)) SALT_BUCKETS = 20;


11.关键词搜索上榜记录(我的应用关键词上榜记录明细)
CREATE TABLE APPSTORE.APP_KEYWORD_ON_BOARD_AGRR(
UPDATETIME VARCHAR NOT NULL,
APPID VARCHAR  NOT NULL,
COUNTRY VARCHAR NOT NULL,
DEVICE VARCHAR NOT NULL,
HOTWORDS VARCHAR  NOT NULL,
DAY VARCHAR,
CONSTRAINT pk PRIMARY KEY (UPDATETIME,APPID, COUNTRY, DEVICE, HOTWORDS)) SALT_BUCKETS = 20;
